# HTTP 메시지
## 3.1 메시지의 흐름
인바운드, 아웃바운드, 업스트림, 다운스트림은 메세지의 방향을 의미하는 용어.

### 3.1.1 메시지는 원 서버 방향을 인바운드로 하여 송신된다
인바운드, 아웃바운드 -> 트랜잭션 방향을 표현
메세지 -> 원서버로이동 : 인바운드
메시지 -> 사용자로 돌아오는 것 : 아웃바운드

### 3.1.2. 다운스트림으로 흐르는 메시지
요청, 응답 메시지는 모두 다운스트림으로 흐른다.
메시지의 발송자 = 수신자의 업스트림

## 3.2 메시지의 각 부분
메시지: 데이터의 구조화된 블록
시작줄 / 헤더 / 본문(없을수 있음)

시작줄. 헤더 -> 줄 단위로 분리된 아스키 문자열
`CRLF`: 각 줄은 캐리지리턴(아스키13)과 개행문자(아스키10)로 구성된 두 글자의 줄바꿈 문자열

### 3.2.1 메시지 문법
요청 메시지의 형식
```planText

<메서드> <요청URL> <버전>
<헤더>

<엔터티 본문>

```

응답 메시지의 형식
```planText

<버전> <상태코드> <사유구절>
<헤더>

<엔터티 본문>

```

- 버전
	- 이 메시지에서 사용중인 HTTP 버전
	- HTTP/<메이저>,<마이더>
	- 메이저와 마이너는 모두 정수
- 사유구절
	- 상태코드 이후 부터 줄바꿈 문자열까지가 사유구절
	- 오로지 사람에게 읽히기 위한 목적으로만 존재

### 3.2.2 시작줄
- 요청줄
- 응답줄
- 메서드
- 상태코드
- 사유구절
- 버전번호
### 3.2.3 헤더
- 헤더분류
	- 일반헤더 : 요청과 응답 양쪽에 모두 나타낼 수 있음
	- 요청헤더 : 요청에 대한 부가 정보를 제공
	- 응답헤더 : 응답에 대한 부가 정보를 제공
	- Entity 헤더 : 본문 크기와 콘텐츠 혹은 리소스 그 자체를 서술
	- 확장 헤더 : 명세에 정의되지 않은 새로운 해더
	
- 헤더 한 줄을 여러줄로 나누기
	- 추가줄 앞에 최소 하나의 스페이스 혹은 탭 문자가 와야한다.

### 3.2.4 엔터티 본문

## 3.3 메서드
### 3.3.1 안전한 메서드
- GET, HEAD
- 요청으로 인해 서버에 어떠한 작용도 없음

### 3.3.2 GET
- 서버에게 리소스를 달라고 요청하기 위해 쓰임

### 3.3.3 HEAD
- GET 처럼 행동하지만, 서버는 응답으로 헤더만을 돌려준다.
- 엔터티 본문은 반환되지 않는다.
- 리소스를 실제로 가져올 필요 없이 헤더만을 조사할 수 있도록 해준다.
	- 응답의 상태 코드를 통해 개체가 존재하는지 확인할 수 있다.
	- 헤더를 확인하여 리소스가 변경되었는지 검사할 수 있다.
- **서버 개발자들은 GET으로 얻는 것과 정확히 일치함을 보장해줘야한다.**
- HTTP/1.1 준수를 위해서는 HEAD 메서드가 반드시 구현되어 있어야한다.

### 3.3.4 PUT
- 새롭게 만들거나, 데이터를 교체하는 일

### 3.3.5 POST
- 서버에 입력 데이터를 전송하기 위해 설계
- HTTP 폼을 지원하기 위해 흔히 사용

### 3.3.6 TRACE
- 주로 진단을 위해 사용
- 클라이언트에게 자신의 요청이 서버에 도달했을 때 어떻게 보이게 되는지알려준다.
- TRACE 요청은 목적지 서버에서 루프백 진단을 시작한다.
- 자신이 받은 요청 미시지를 본문에 넣어 TRACE 응답을 되돌려준다.
- 요청이 의도한 요청/응답 연쇄를 거쳐가는지 검사할 수 있다.
- 프락시나 다른 애플리케이션들이 요청에 어떤 영향을 미치는지 확인해보고자 할 때도 좋은 도구
- 중간 애플리케이션이 여러다른 종류의 요청을 일관되게 다룬다고 가증하는 문제가 있음
- 어떻게 TRACE 요청을 처리할 것인지에 대해서는 일반적으로 중간애플리케이션이 결정을 내린다.
- 본문을 보낼 수 없다.

### 3.3.7 OPTIONS
- 웹 서버에게 여러 가지 종류의 지원 범위에 대해 물어본다.
- 어떤 메서드가 지원되는지 물어볼 수 있다.

### 3.3.8 DELETE
- 삭제 요청
- 삭제가 수행되는것을 보장하지 못한다.

### 3.3.9 확장 메서드
- ROCK: 사용자가 리소스를 잠글 수 있게 해준다. 동시성..
...

- 관용적인 것으로 확장 메서드를 따르자.
- "엄격하게 보내고 관대하게 받아들여라"


## 3.4 상태 코드
### 3.4.1 100~199: 정보성 상태코드
- 100(Continue): 요청의 시작 일부가 받아들여졌으며, 클라이언트는 나머지를 계속 이어서 보내야 함을 의미
- 101(Switching Protocols): 클라이언트가 Upgrade 헤더에 나열한 것 중 하나로 서버가 프로토콜을 바꾸었음을 의미

### 3.4.3 300~399: 리다이렉션 상태코드
(다시 읽기)

## 3.5 헤더
